# Отчет по Лабораторной работе №1: Система управления курсами и преподавателями

## Общее описание проекта

Данное консольное приложение представляет собой систему управления учебными курсами и преподавателями для университета. Оно предоставляет возможность управлять курсами, назначать преподавателей, зачислять студентов и работать с различными типами курсов (онлайн и офлайн).

**Основные функции системы:**

- Просмотр всех курсов, преподавателей и студентов
- Добавление и удаление курсов
- Зачисление и отчисление студентов на курсы
- Поиск курсов по преподавателю
- Поддержка двух типов курсов: онлайн и офлайн
- Просмотр детальной информации о курсах

## Структура проекта

Проект организован следующим образом:

```
lab_1/
├── Program.cs              # Точка входа в приложение
├── Tests.cs                # Unit тесты
├── homework1.csproj        # Файл проекта
├── core/                   # Основные классы системы
│   ├── course.cs           # Абстрактный базовый класс Course
│   ├── onlinecourse.cs    # Класс для онлайн-курсов
│   ├── offlinecourse.cs   # Класс для офлайн-курсов
│   ├── teacher.cs         # Класс для преподавателей
│   ├── student.cs        # Класс для студентов
│   ├── coursemanager.cs   # Менеджер для управления системой
│   └── interfaces.cs      # Интерфейсы системы
└── data/                   # JSON файлы с данными
    ├── teachers.json       # Данные о преподавателях
    ├── students.json       # Данные о студентах
    └── courses.json        # Данные о курсах
```

## Детальное объяснение кода по файлам

### Файл `Program.cs` - точка входа в приложение

**Назначение:** Основной файл приложения, который инициализирует систему управления курсами и обрабатывает пользовательский ввод через интерактивное меню.

**Структура файла:**

1. **Инициализация системы** (строки 8-10)
2. **Загрузка данных из JSON файлов** (строки 12-112)
3. **Создание менеджера курсов** (строка 114)
4. **Главный цикл программы с меню** (строки 116-528)
5. **Вспомогательные методы для работы с меню** (строки 200-479)
6. **Вспомогательные классы для десериализации JSON** (строки 481-527)

#### Инициализация системы

```csharp
string systemName = "ITMO Course Management System";
```

**Объяснение:** Название системы задается напрямую в коде. Ранее использовался файл `appsettings.json`, но для упрощения название теперь задается в коде.

#### Загрузка преподавателей из JSON

```csharp
var teachers = new List<Teacher>();
try
{
    string teachersText = File.ReadAllText("data/teachers.json");
    var teachersData = JsonSerializer.Deserialize<TeachersData>(teachersText);
    if (teachersData != null && teachersData.Teachers != null)
    {
        foreach (var teacherData in teachersData.Teachers)
        {
            Teacher teacher = new Teacher(
                teacherData.Id,
                teacherData.Name,
                teacherData.Email,
                teacherData.Department,
                teacherData.Specialization
            );
            teachers.Add(teacher);
        }
    }
}
catch
{
}
```

**Объяснение:**

- Создается пустой список `teachers` для хранения объектов `Teacher`
- Используется `File.ReadAllText()` для чтения JSON файла
- `JsonSerializer.Deserialize<TeachersData>()` преобразует JSON в объект `TeachersData`
- В цикле `foreach` создаются объекты `Teacher` и добавляются в список
- Блок `try-catch` обрабатывает ошибки (например, если файл не найден)

#### Загрузка студентов из JSON

```csharp
var students = new List<Student>();
try
{
    string studentsText = File.ReadAllText("data/students.json");
    var studentsData = JsonSerializer.Deserialize<StudentsData>(studentsText);
    if (studentsData != null && studentsData.Students != null)
    {
        foreach (var studentData in studentsData.Students)
        {
            Student student = new Student(
                studentData.Id,
                studentData.Name,
                studentData.Email,
                studentData.Year,
                studentData.Major
            );
            students.Add(student);
        }
    }
}
catch
{
}
```

**Объяснение:** Аналогично загрузке преподавателей, но создаются объекты `Student` с полями: ID, имя, email, год обучения и специальность.

#### Загрузка курсов из JSON

```csharp
var courses = new List<Course>();
try
{
    string coursesText = File.ReadAllText("data/courses.json");
    var coursesData = JsonSerializer.Deserialize<CoursesData>(coursesText);
    if (coursesData != null && coursesData.Courses != null)
    {
        foreach (var courseData in coursesData.Courses)
        {
            Course course;
            if (courseData.Type.ToLower() == "online")
            {
                course = new OnlineCourse(
                    courseData.Id,
                    courseData.Name,
                    courseData.Description,
                    courseData.TeacherId,
                    courseData.MaxStudents,
                    courseData.Platform ?? ""
                );
            }
            else if (courseData.Type.ToLower() == "offline")
            {
                course = new OfflineCourse(
                    courseData.Id,
                    courseData.Name,
                    courseData.Description,
                    courseData.TeacherId,
                    courseData.MaxStudents,
                    courseData.Room ?? "",
                    courseData.Schedule ?? ""
                );
            }
            else
            {
                continue;
            }

            if (courseData.Students != null)
            {
                foreach (var studentId in courseData.Students)
                {
                    course.EnrollStudent(studentId);
                }
            }

            courses.Add(course);
        }
    }
}
catch
{
}
```

**Объяснение:**

1. В зависимости от типа курса (`"online"` или `"offline"`) создается соответствующий объект
2. Для онлайн-курсов создается `OnlineCourse` с указанием платформы
3. Для офлайн-курсов создается `OfflineCourse` с указанием аудитории и расписания
4. Если тип курса неизвестен, используется `continue` для пропуска этого курса
5. Если в JSON указаны студенты, они зачисляются на курс через `course.EnrollStudent(studentId)`
6. Оператор `??` (null-coalescing) используется для предоставления пустой строки, если значение `null`

#### Создание менеджера курсов

```csharp
var courseManager = new CourseManager(courses, teachers, students);
```

**Объяснение:** Создается объект `CourseManager`, который будет управлять всеми курсами, преподавателями и студентами. В конструктор передаются загруженные из JSON списки.

#### Главный цикл программы

```csharp
Console.WriteLine($"== {systemName} ==");
while (true)
{
    Console.WriteLine();
    Console.WriteLine("1) Show all courses");
    Console.WriteLine("2) Show all teachers");
    Console.WriteLine("3) Show all students");
    Console.WriteLine("4) Show courses by teacher");
    Console.WriteLine("5) Add new course");
    Console.WriteLine("6) Remove course");
    Console.WriteLine("7) Enroll student in course");
    Console.WriteLine("8) Unenroll student from course");
    Console.WriteLine("9) Show course details");
    Console.WriteLine("0) Exit");
    Console.Write("Choose: ");

    var choice = Console.ReadLine();
    Console.Clear();

    switch (choice)
    {
        case "1":
            ShowAllCourses(courseManager);
            break;
        // ... другие case
    }
}
```

**Объяснение:**

- `while (true)` создает бесконечный цикл, который продолжается до выбора "0" (Exit)
- Выводится меню с опциями
- `Console.ReadLine()` читает выбор пользователя
- `Console.Clear()` очищает экран перед выводом результата
- `switch` обрабатывает выбор пользователя и вызывает соответствующий метод

#### Вспомогательные методы

**`ShowAllCourses(CourseManager courseManager)`** - выводит список всех курсов с их ID, названием, преподавателем и количеством студентов.

**`ShowAllTeachers(CourseManager courseManager)`** - выводит список всех преподавателей.

**`ShowAllStudents(CourseManager courseManager)`** - выводит список всех студентов.

**`ShowCoursesByTeacher(CourseManager courseManager)`** - запрашивает ID преподавателя и выводит все его курсы.

**`AddNewCourse(CourseManager courseManager)`** - позволяет создать новый курс, запрашивая у пользователя все необходимые данные (тип, название, описание, ID преподавателя, максимальное количество студентов, и специфичные для типа курса данные).

**`RemoveCourse(CourseManager courseManager)`** - удаляет курс по ID.

**`EnrollStudent(CourseManager courseManager)`** - зачисляет студента на курс по их ID.

**`UnenrollStudent(CourseManager courseManager)`** - отчисляет студента с курса.

**`ShowCourseDetails(CourseManager courseManager)`** - выводит детальную информацию о курсе, включая преподавателя, расположение и список зачисленных студентов.

#### Вспомогательные классы для JSON десериализации

В конце файла определены внутренние классы (`TeachersData`, `TeacherData`, `StudentsData`, `StudentData`, `CoursesData`, `CourseData`), которые используются для десериализации JSON файлов. Эти классы имеют свойства с `{ get; set; }`, что позволяет `JsonSerializer` автоматически заполнять их значениями из JSON.

### Файл `interfaces.cs` - интерфейсы системы

**Назначение:** Определяет контракт для класса `CourseManager`, гарантируя наличие определенных методов.

```csharp
namespace CourseManagement.Core
{
    public interface ICourseManager
    {
        bool AddCourse(Course course);
        bool RemoveCourse(int courseId);
        Course? GetCourse(int courseId);
        List<Course> GetAllCourses();
        List<Course> GetCoursesByTeacher(int teacherId);
        bool EnrollStudentInCourse(int courseId, int studentId);
        bool UnenrollStudentFromCourse(int courseId, int studentId);
    }
}
```

**Объяснение:**

- **Интерфейс** - это контракт, который определяет, какие методы должен реализовать класс
- `ICourseManager` определяет методы для управления курсами и студентами
- `Course?` означает, что метод может вернуть `Course` или `null` (nullable reference type)
- `List<Course>` - возвращает список курсов
- Класс `CourseManager` реализует этот интерфейс, гарантируя наличие всех указанных методов

### Файл `course.cs` - абстрактный базовый класс

**Назначение:** Абстрактный базовый класс для всех типов курсов, определяющий общую структуру и функциональность.

#### Свойства класса

```csharp
public int Id { get; }
public string Name { get; }
public string Description { get; }
public int TeacherId { get; }
public int MaxStudents { get; }
public List<int> Students { get; }
```

**Объяснение:**

- Все свойства имеют только геттер (`get;`), что делает их доступными только для чтения после создания объекта
- `Id` - уникальный идентификатор курса
- `Name` - название курса
- `Description` - описание курса
- `TeacherId` - ID преподавателя, ведущего курс
- `MaxStudents` - максимальное количество студентов на курсе
- `Students` - список ID зачисленных студентов (тип `List<int>`)

#### Конструктор

```csharp
protected Course(int id, string name, string description, int teacherId, int maxStudents)
{
    Id = id;
    Name = name;
    Description = description;
    TeacherId = teacherId;
    MaxStudents = maxStudents;
    Students = new List<int>();
}
```

**Объяснение:**

- `protected` означает, что конструктор доступен только внутри класса `Course` и его производных классов (`OnlineCourse`, `OfflineCourse`)
- Это предотвращает создание объектов `Course` напрямую (так как класс абстрактный)
- В конструкторе инициализируются все свойства и создается пустой список студентов

#### Метод проверки возможности зачисления

```csharp
public bool CanEnrollStudent(int studentId)
{
    return !Students.Contains(studentId) && Students.Count < MaxStudents;
}
```

**Объяснение:**

- Проверяет два условия:
  1. `!Students.Contains(studentId)` - студент еще не зачислен на курс
  2. `Students.Count < MaxStudents` - есть свободные места
- Возвращает `true`, если оба условия выполнены, иначе `false`

#### Метод зачисления студента

```csharp
public bool EnrollStudent(int studentId)
{
    if (!CanEnrollStudent(studentId))
        return false;

    Students.Add(studentId);
    return true;
}
```

**Объяснение:**

- Сначала проверяет возможность зачисления через `CanEnrollStudent`
- Если зачисление невозможно, возвращает `false`
- Если возможно, добавляет ID студента в список `Students` и возвращает `true`

#### Метод отчисления студента

```csharp
public bool UnenrollStudent(int studentId)
{
    return Students.Remove(studentId);
}
```

**Объяснение:**

- `Remove()` удаляет первое вхождение `studentId` из списка `Students`
- Возвращает `true`, если элемент был найден и удален, иначе `false`

#### Абстрактные методы

```csharp
public abstract string GetCourseDetails();
public abstract string GetLocationInfo();
```

**Объяснение:**

- `abstract` означает, что метод не имеет реализации в этом классе
- Производные классы (`OnlineCourse`, `OfflineCourse`) **обязаны** реализовать эти методы
- `GetCourseDetails()` - возвращает детальную информацию о курсе
- `GetLocationInfo()` - возвращает информацию о расположении курса (платформа для онлайн, аудитория для офлайн)

### Файл `onlinecourse.cs` - класс для онлайн-курсов

**Назначение:** Класс для представления онлайн-курсов, наследующийся от `Course`.

#### Свойство класса

```csharp
public string Platform { get; }
```

**Объяснение:** Дополнительное свойство, специфичное для онлайн-курсов. Хранит название платформы (например, "Zoom", "Microsoft Teams").

#### Конструктор

```csharp
public OnlineCourse(int id, string name, string description, int teacherId, int maxStudents, string platform)
    : base(id, name, description, teacherId, maxStudents)
{
    Platform = platform;
}
```

**Объяснение:**

- `: base(...)` вызывает конструктор базового класса `Course`
- Это инициализирует все свойства, унаследованные от `Course`
- Затем инициализируется специфичное свойство `Platform`

#### Переопределение метода GetCourseDetails

```csharp
public override string GetCourseDetails()
{
    return $"Online Course: {Name}\nDescription: {Description}\nPlatform: {Platform}\nMax Students: {MaxStudents}\nCurrent Students: {Students.Count}";
}
```

**Объяснение:**

- `override` означает, что этот метод заменяет абстрактный метод из базового класса
- Возвращает строку с информацией об онлайн-курсе, включая платформу
- Использует интерполяцию строк (`$"..."`) для форматирования

#### Переопределение метода GetLocationInfo

```csharp
public override string GetLocationInfo()
{
    return $"Online platform: {Platform}";
}
```

**Объяснение:** Возвращает информацию о платформе проведения онлайн-курса.

### Файл `offlinecourse.cs` - класс для офлайн-курсов

**Назначение:** Класс для представления офлайн-курсов, наследующийся от `Course`.

#### Свойства класса

```csharp
public string Room { get; }
public string Schedule { get; }
```

**Объяснение:**

- `Room` - номер или название аудитории
- `Schedule` - расписание занятий (например, "Пн, Ср, Пт 10:00-11:30")

#### Конструктор

```csharp
public OfflineCourse(int id, string name, string description, int teacherId, int maxStudents, string room, string schedule)
    : base(id, name, description, teacherId, maxStudents)
{
    Room = room;
    Schedule = schedule;
}
```

**Объяснение:** Аналогично `OnlineCourse`, но инициализирует `Room` и `Schedule` вместо `Platform`.

#### Переопределение методов

```csharp
public override string GetCourseDetails()
{
    return $"Offline Course: {Name}\nDescription: {Description}\nRoom: {Room}\nSchedule: {Schedule}\nMax Students: {MaxStudents}\nCurrent Students: {Students.Count}";
}

public override string GetLocationInfo()
{
    return $"Room: {Room}, Schedule: {Schedule}";
}
```

**Объяснение:** Реализует абстрактные методы, предоставляя информацию об аудитории и расписании офлайн-курса.

### Файл `teacher.cs` - класс для преподавателей

**Назначение:** Модель преподавателя, хранящая информацию о преподавателях университета.

#### Свойства класса

```csharp
public int Id { get; }
public string Name { get; }
public string Email { get; }
public string Department { get; }
public string Specialization { get; }
```

**Объяснение:**

- `Id` - уникальный идентификатор преподавателя
- `Name` - имя преподавателя
- `Email` - электронная почта
- `Department` - кафедра
- `Specialization` - специализация

#### Конструктор

```csharp
public Teacher(int id, string name, string email, string department, string specialization)
{
    Id = id;
    Name = name;
    Email = email;
    Department = department;
    Specialization = specialization;
}
```

**Объяснение:** Инициализирует все свойства преподавателя переданными значениями.

#### Переопределение метода ToString

```csharp
public override string ToString()
{
    return $"{Name} ({Department}) - {Specialization}";
}
```

**Объяснение:**

- Переопределяет стандартный метод `ToString()` из класса `Object`
- Возвращает строковое представление преподавателя в формате: "Имя (Кафедра) - Специализация"
- Используется при выводе информации о преподавателе

### Файл `student.cs` - класс для студентов

**Назначение:** Модель студента, хранящая информацию о студентах университета.

#### Свойства класса

```csharp
public int Id { get; }
public string Name { get; }
public string Email { get; }
public int Year { get; }
public string Major { get; }
```

**Объяснение:**

- `Id` - уникальный идентификатор студента
- `Name` - имя студента
- `Email` - электронная почта
- `Year` - год обучения (1, 2, 3, 4)
- `Major` - специальность

#### Конструктор

```csharp
public Student(int id, string name, string email, int year, string major)
{
    Id = id;
    Name = name;
    Email = email;
    Year = year;
    Major = major;
}
```

**Объяснение:** Инициализирует все свойства студента.

#### Переопределение метода ToString

```csharp
public override string ToString()
{
    return $"{Name} (Year {Year}, {Major})";
}
```

**Объяснение:** Возвращает строковое представление студента в формате: "Имя (Year Год, Специальность)".

### Файл `coursemanager.cs` - менеджер системы

**Назначение:** Основной класс для управления курсами, преподавателями и студентами. Реализует интерфейс `ICourseManager`.

#### Поля класса

```csharp
private readonly List<Course> _courses;
private readonly List<Teacher> _teachers;
private readonly List<Student> _students;
```

**Объяснение:**

- `private` - поля доступны только внутри класса
- `readonly` - поля не могут быть переназначены после инициализации (но содержимое списков можно изменять)
- `_courses` - список всех курсов в системе
- `_teachers` - список всех преподавателей
- `_students` - список всех студентов

#### Конструктор

```csharp
public CourseManager(List<Course>? courses = null, List<Teacher>? teachers = null, List<Student>? students = null)
{
    _courses = courses ?? new List<Course>();
    _teachers = teachers ?? new List<Teacher>();
    _students = students ?? new List<Student>();
}
```

**Объяснение:**

- Конструктор с опциональными параметрами (все параметры имеют значение по умолчанию `null`)
- Оператор `??` (null-coalescing) используется для предоставления пустого списка, если параметр равен `null`
- Это позволяет создать `CourseManager` без параметров (все списки будут пустыми) или с предзагруженными данными

#### Метод добавления курса

```csharp
public bool AddCourse(Course course)
{
    if (course == null)
    {
        return false;
    }

    if (GetCourse(course.Id) != null)
    {
        return false;
    }

    _courses.Add(course);
    return true;
}
```

**Объяснение:**

1. Проверяет, что курс не равен `null`
2. Проверяет, что курс с таким ID еще не существует (используя метод `GetCourse`)
3. Если все проверки пройдены, добавляет курс в список и возвращает `true`
4. Иначе возвращает `false`

#### Метод удаления курса

```csharp
public bool RemoveCourse(int courseId)
{
    var course = GetCourse(courseId);
    if (course == null)
    {
        return false;
    }

    _courses.Remove(course);
    return true;
}
```

**Объяснение:**

1. Находит курс по ID через метод `GetCourse`
2. Если курс не найден, возвращает `false`
3. Удаляет курс из списка и возвращает `true`

#### Метод получения курса по ID

```csharp
public Course? GetCourse(int courseId)
{
    for (int i = 0; i < _courses.Count; i++)
    {
        if (_courses[i].Id == courseId)
        {
            return _courses[i];
        }
    }
    return null;
}
```

**Объяснение:**

- Использует цикл `for` для перебора всех курсов
- Сравнивает ID каждого курса с искомым
- Если найден, возвращает курс
- Если не найден, возвращает `null` (тип `Course?` позволяет вернуть `null`)

#### Метод получения всех курсов

```csharp
public List<Course> GetAllCourses()
{
    List<Course> result = new List<Course>();
    for (int i = 0; i < _courses.Count; i++)
    {
        result.Add(_courses[i]);
    }
    return result;
}
```

**Объяснение:**

- Создает новый список `result`
- Копирует все курсы из внутреннего списка `_courses` в новый список
- Возвращает копию (защитное программирование - внешний код не может напрямую изменять внутренний список)

#### Метод получения курсов по преподавателю

```csharp
public List<Course> GetCoursesByTeacher(int teacherId)
{
    List<Course> result = new List<Course>();
    for (int i = 0; i < _courses.Count; i++)
    {
        if (_courses[i].TeacherId == teacherId)
        {
            result.Add(_courses[i]);
        }
    }
    return result;
}
```

**Объяснение:**

- Создает новый список для результатов
- Перебирает все курсы и проверяет, соответствует ли `TeacherId` искомому
- Добавляет подходящие курсы в результат
- Возвращает список курсов преподавателя

#### Метод зачисления студента на курс

```csharp
public bool EnrollStudentInCourse(int courseId, int studentId)
{
    var course = GetCourse(courseId);
    if (course == null)
    {
        return false;
    }

    var student = GetStudent(studentId);
    if (student == null)
    {
        return false;
    }

    return course.EnrollStudent(studentId);
}
```

**Объяснение:**

1. Находит курс по ID
2. Находит студента по ID
3. Если курс или студент не найдены, возвращает `false`
4. Вызывает метод `EnrollStudent` курса, который сам проверяет возможность зачисления

#### Метод отчисления студента с курса

```csharp
public bool UnenrollStudentFromCourse(int courseId, int studentId)
{
    var course = GetCourse(courseId);
    if (course == null)
    {
        return false;
    }
    return course.UnenrollStudent(studentId);
}
```

**Объяснение:**

1. Находит курс по ID
2. Если курс не найден, возвращает `false`
3. Вызывает метод `UnenrollStudent` курса

#### Методы для работы с преподавателями

**`AddTeacher(Teacher teacher)`** - добавляет преподавателя в систему, проверяя отсутствие дубликатов по ID.

**`GetTeacher(int teacherId)`** - находит преподавателя по ID, используя цикл `for`.

**`GetAllTeachers()`** - возвращает копию списка всех преподавателей.

#### Методы для работы со студентами

**`AddStudent(Student student)`** - добавляет студента в систему, проверяя отсутствие дубликатов по ID.

**`GetStudent(int studentId)`** - находит студента по ID, используя цикл `for`.

**`GetAllStudents()`** - возвращает копию списка всех студентов.

**`StudentExists(int studentId)`** - проверяет существование студента, используя метод `GetStudent`.

## Принципы ООП в проекте

### Наследование

- Базовый абстрактный класс `Course` определяет общую структуру и поведение для всех курсов
- Классы `OnlineCourse` и `OfflineCourse` наследуются от `Course` и расширяют функциональность:
  - `OnlineCourse` добавляет свойство `Platform` (платформа)
  - `OfflineCourse` добавляет свойства `Room` (аудитория) и `Schedule` (расписание)
- Наследование позволяет использовать полиморфизм и переиспользовать общий код
- Ключевое слово `sealed` в `OnlineCourse` и `OfflineCourse` предотвращает дальнейшее наследование

**Пример наследования:**

```csharp
public sealed class OnlineCourse : Course
{
    public string Platform { get; }
    // ...
}
```

### Полиморфизм

- Методы `GetCourseDetails()` и `GetLocationInfo()` переопределяются в производных классах с помощью ключевого слова `override`
- Оба типа курсов могут обрабатываться через общий интерфейс `Course`
- Использование абстрактных методов обеспечивает различную реализацию для каждого типа курса

**Пример полиморфизма:**

```csharp
Course onlineCourse = new OnlineCourse(...);
Course offlineCourse = new OfflineCourse(...);

// Одинаковый вызов, разная реализация
string details1 = onlineCourse.GetCourseDetails();   // Вернет информацию о платформе
string details2 = offlineCourse.GetCourseDetails();  // Вернет информацию об аудитории
```

### Абстракция

- Абстрактный класс `Course` скрывает детали реализации, предоставляя общий интерфейс
- Интерфейс `ICourseManager` определяет контракт без реализации
- Пользователь работает с высокоуровневыми абстракциями, не зная деталей реализации конкретных классов

**Пример абстракции:**

```csharp
public abstract class Course
{
    public abstract string GetCourseDetails();  // Без реализации
    public abstract string GetLocationInfo();   // Без реализации
}
```

### Инкапсуляция

- Приватные поля скрыты от внешнего доступа (`_courses`, `_teachers`, `_students`)
- Публичные методы предоставляют контролируемый интерфейс для взаимодействия
- Свойства с геттерами только для чтения (`get;`) защищают данные от несанкционированного изменения после создания объекта
- Методы `GetAllCourses()`, `GetAllTeachers()`, `GetAllStudents()` возвращают копии списков, предотвращая прямое изменение внутренних данных

**Пример инкапсуляции:**

```csharp
private readonly List<Course> _courses;  // Приватное поле

public List<Course> GetAllCourses()      // Публичный метод
{
    List<Course> result = new List<Course>();
    // ... копирование данных
    return result;  // Возврат копии, а не оригинала
}
```

## Unit тестирование

Проект включает **27 unit тестов**, написанных с использованием фреймворка xUnit, которые покрывают основную бизнес-логику:

### Тесты для классов данных

- **`StudentTests`** (2 теста):

  - `Student_ShouldCreateCorrectly` - проверяет корректное создание объекта студента
  - `Student_ToString_ShouldReturnCorrectFormat` - проверяет форматирование строкового представления

- **`TeacherTests`** (2 теста):
  - `Teacher_ShouldCreateCorrectly` - проверяет корректное создание объекта преподавателя
  - `Teacher_ToString_ShouldReturnCorrectFormat` - проверяет форматирование строкового представления

### Тесты для курсов

- **`CourseTests`** (12 тестов):
  - Создание онлайн и офлайн курсов
  - Зачисление студентов на курсы
  - Отчисление студентов с курсов
  - Проверка лимитов зачисления
  - Проверка предотвращения дублирования зачислений
  - Проверка методов `GetCourseDetails()` и `GetLocationInfo()`
  - Проверка методов `CanEnrollStudent()`

### Тесты для менеджера

- **`CourseManagerTests`** (11 тестов):
  - Добавление и удаление курсов
  - Получение курсов по ID и по преподавателю
  - Зачисление и отчисление студентов
  - Добавление преподавателей и студентов
  - Получение всех преподавателей и студентов
  - Проверка существования студентов
  - Валидация при работе с несуществующими объектами

### Запуск тестов

Для запуска всех тестов используется команда:

```bash
dotnet test
```

Для запуска с подробным выводом:

```bash
dotnet test --verbosity detailed
```

Для запуска с минимальным выводом:

```bash
dotnet test --verbosity quiet
```

## Обработка ошибок и валидация

- **Валидация существования студентов**: При попытке зачислить студента система проверяет, существует ли студент в базе данных через метод `GetStudent()`
- **Валидация существования курсов**: При операциях с курсами проверяется их наличие через метод `GetCourse()`
- **Проверка лимитов**: Система предотвращает зачисление студентов сверх лимита курса через метод `CanEnrollStudent()`
- **Проверка дубликатов**: Предотвращается зачисление одного студента дважды на один курс и добавление курсов/преподавателей/студентов с одинаковыми ID
- **Информативные сообщения**: При ошибках пользователь получает понятные сообщения о причинах (например, "Course not found", "Student already enrolled")
- **Обработка некорректных данных**: Проверка пользовательского ввода на всех этапах (например, `int.TryParse()` для проверки корректности числового ввода)
- **Обработка ошибок при загрузке JSON**: Блоки `try-catch` обрабатывают ошибки при чтении JSON файлов (файл не найден, некорректный формат)

## Используемые технологии и библиотеки

- **C# .NET 10.0** - основной язык и платформа
- **System.Text.Json** - для работы с JSON файлами (десериализация данных)
- **xUnit** - фреймворк для unit тестирования
- **Console I/O** - для интерактивного взаимодействия с пользователем

## Итоги

Система демонстрирует комплексное использование принципов объектно-ориентированного программирования:

- **Наследование** для создания иерархии типов курсов (абстрактный класс `Course` и его производные классы)
- **Полиморфизм** для единообразной работы с разными типами курсов через общий интерфейс
- **Абстракция** для скрытия деталей реализации и предоставления высокоуровневого интерфейса
- **Инкапсуляция** для защиты данных и контролируемого доступа через приватные поля и публичные методы

Проект полностью покрыт unit тестами (27 тестов), что обеспечивает надежность и поддерживаемость кода. Код написан с учетом простоты и понятности для начинающих программистов, используя явные циклы вместо LINQ и простые структуры данных.
